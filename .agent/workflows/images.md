---
description: 高品質ビジュアル生成・自己進化ワークフロー。仕様の定義、資産フォルダ（zerogra-assets）連携、Nano Banana Pro向けの高度なプロンプト設計、およびテンプレートの永続化を自動化します。
---
# /images - 高品質ビジュアル生成・自己進化ワークフロー

画像生成ツール `generate_image` を最大限に活用し、ひろきくんとの対話を通じて最高品質のアウトプットを錬成・学習するよ！🎨✨

## 🎯 このワークフローの目的
- 単なる画像生成ではなく、ひろきくんへのヒアリングを通じて、ゼロから「トーン＆マナー（和風、プレミアム等）」を定義し、ビジュアルに昇華させる。
- **Nano Banana Pro (Imagen 3)** の特性である「正確な文字」「一貫性」「高解像度」を引き出すプロンプトを自動設計する。
- 既存の参照画像や背景資産（自社アセット）をインプットとして活用し、デザインの文脈を統合する。
- **自己進化**: 生成完了後のひろきくんからの感想（フィードバック）を元に、このコマンド（ワークフロー）自体のテンプレートや手順をブラッシュアップし、永久に成長し続ける。

## ⚠️ 運用鉄則（必須遵守）
- **既存の知見・定義を勝手に消さない**: 既存のコンテキストは「極力削除せず、蓄積型のファイルとして追記・再構成する」ことを絶対の原則とする。既存の知見を消して情報を単純化してはならない。
- **長さは制限しない**: 設定、テンプレート、定義がどれだけ長くなっても構わない。簡潔さよりも情報の密度と履歴の保持を優先する。
- **ヒアリング形式（厳格）**: **必ず「一問一答形式」で進める。** 1つのターンの回答案を提示し、莉奈の「おすすめ（理由付）」を添えること。複数を一度に聞くのは禁止。
- **背景画像の取り扱い（厳守）**: 指定された画像を背景として使用する場合、その画像に写っているもの（人物、風景、料理、物、文字など）を**AI側で勝手に改変・再生成してはならない**。
  - ✅ 許可される変更：トリミング（アスペクト比調整）、明るさ/色調補正、上に文字を重ねる、ぼかし加工など「画像編集ツール」で可能な範囲。
  - ❌ 禁止される変更：写っている人物の顔を変える、料理の形を変える、背景の要素を消す/足すなどの画像生成（AIリメイク）レベルの変更。
- **日本語の精度の追求**: AIは日本語の文字入れで誤字（例：「イベント」が「イベト」になる等）をすることがある。生成後は必ずセルフチェックを行い、誤字があればプロンプトを微調整して即座にリトライを提案すること。
- **コマンド提示の絶対ルール**: ユーザーにファイルの移動（`mv`）や操作などのコマンドを提示する際は、**必ず先頭に `cd` を含めること。** カレントディレクトリを明示的に指定しないコマンド提示は、実行エラーの原因となるため厳禁とする。

---

## Step 1: ギャザリング（目的と場所の特定） 🔍

AIはまず、生成の物理的な要件を特定するよ。

1. **生成の目的**: バナー、メインビジュアル、アイコン、ボタン、モックアップなど。
2. **保存先**: 原則として **Desktop** に一度生成し、ひろきくんに確認してもらう。
   - 生成後に、適切な場所（`images/` 等）への **`cd` 入りの移動コマンド** を提示してひろきくんに実行してもらう。
3. **参照資産の特定**:
   - 参照フォルダ: `/Users/matsumotohiroki/Developer/rina-zero-gravity/zerogra-assets`
   - 上記フォルダから、ひろきくんが指定したものを使用する。指定がない場合は莉奈が「おすすめのアセット」を提示して選んでもらう。

---

## Step 2: リフェレンス・アセット・スキャン 📸

参照資産フォルダの内容を把握し、インプットを特定するよ。

// turbo
1. `/Users/matsumotohiroki/Developer/rina-zero-gravity/zerogra-assets` のファイル一覧を取得。
2. ひろきくんの指定、またはプロジェクトの文脈に合う画像を莉奈がピックアップして提案する。
3. 主要な画像の絶対パスを特定し、`generate_image` の `ImagePaths` 引数として準備する。

---

## Step 3: ディープ・ヒアリング（設計と仕様の定義） 💬

ひろきくんと一緒に、今回のビジュアルの「魂」を一問一答形式で決めていくよ。

### 1. トーン＆マナー ＆ キーカラーの決定 🎨
世界観をゼロから決定するために、**最大10パターン以内** で具体的な案を提示する。各案には以下の要素を含めること：
- **イメージ名**（例：極上和モダン、ネオンサイバー、北欧ミニマル等）
- **コンセプト**（どんな感情を喚起するか、どんなターゲット向けか）
- **推奨キーカラー**（具体的な配色案）

### 2. 具体的仕様（一問一答）
以下の項目を順番に確認していくよ。
- **テキスト情報**: 画像内に入れたい具体的な文字（日本語の筆文字など）。
- **構図・照明**: センター配置、ダイナミックなライティング、被写界深度、広角/望遠など。
- **アスペクト比**: 正方形、16:9、縦長、黄金比など。
  - **⚠️ 必須**: 構図・照明とアスペクト比は、莉奈が独断で決めず必ずひろきくんに確認すること！

---

## Step 4: プロンプト錬成 & テンプレート永続化 🧪

収集した情報を元に、プロンプトを構築するよ。

- **テンプレートの参照・保存**: 
  - 参照・保存先: `/Users/matsumotohiroki/Developer/rina-zero-gravity/zerogra-assets/prompt-template`
  - 過去の成功パターンや、今回新しく作ったテンプレートをこのディレクトリに保存し、いつでも再利用できるようにする。
- **高密度プロンプト構築**: Nano Banana Pro 向けに英語で最適化。背景維持（"preserve the original image's elements"）や文字入れの指定を精密に行う。

---

## Step 5: 召喚前最終確認 💎

本番生成の前に、莉奈がプランを提示するよ。

1. **プラン提示**: どのテンプレート（`zerogra-assets/prompt-template/`内）をベースにしたか、そして実際に送信するプロンプトの内容をひろきくんに見せて、「これでOK？」って確認する。

---

## Step 6: 召喚（画像生成の実行） 🪄

いよいよ画像を呼び出すよ！

1. **先行サンプル生成**: まずは **1枚だけ** サンプルを生成して提示する。
2. **フィードバック＆修正**: 
   - ひろきくんからフィードバックをもらう。
   - 必要に応じてプロンプトを改善し、再度提示する。
   - この時、必要なら `/prompt-template` 内のテンプレート自体も修正・進化させる！
3. **本番生成枚数の確定**: サンプルがOKになったら、最終的に何パターン生成するかを聞いて実行する。

---

## Step 7: 🏆 感想ヒアリング & 自己進化（最重要ステップ）

1. **フィードバックの回収**: 質、日本語、使い心地を聞く。
2. **ワークフローのアップデート**: 感想に基づき、この `images.md` を「追記・再構成」の形で強化する。
3. **資産化**: 確定したプロンプトや知見を `KNOWLEDGE.md` に蓄積。

---

## ✅ 完了条件
- 指定されたアセットを活かした高品質画像が生成されている。
- テンプレートが `zerogra-assets/prompt-template` に保存されている。
- ひろきくんが実行すべき `cd` 入りの移動コマンドが提示されている。
- 本ワークフロー自体がアップデート（自己進化）されている。

---

## 履歴・改善ログ（自己進化の記録）
- **2026-02-28**: 初回実装。自己進化モデルの確立。
- **2026-02-28**: ユーザーフィードバックにより「一問一答形式」「3案提示」を強化。
- **2026-02-28**: [進化] 背景画像維持、サンプル先行出しフローを導入。
- **2026-02-28**: [ブラッシュアップ] 
  - **Desktop保存** をデフォルト化、移動コマンド（`cd`必須）提供ルール。
  - **zerogra-assets** との強力な連携（アセット選定、テンプレート永続化）。
  - **ヒアリング強化**: 10パターン提案（コンセプト・カラー込）、仕様の完全確認。
  - **確認フロー**: 生成前にテンプレートとプロンプトを明示し承認を得るステップを追加。
  - **フィードバックループ**: サンプル後のテンプレート修正機能を搭載。


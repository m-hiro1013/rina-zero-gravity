---
description: バグの調査、原因特定、修正、検証までを体系的に行う。
---
# バグ修正 (Bug Fix)

**再帰的合成**: このワークフローは他のワークフローを呼び出して構成される。

```
/bug-fix
├── 調査・修正（このワークフロー固有）
├── /generate-unit-tests（リグレッションテスト追加）
└── /verify-code（コード検証）
```

---

## Step 1: 問題の再現
報告されたバグを再現せよ：
- 再現手順を確認・実行
- エラーメッセージやログを収集
- 発生条件（環境、入力値等）を特定

## Step 2: 原因調査
バグの根本原因を特定せよ：
- スタックトレースの分析
- 関連するコードのレビュー
- 変更履歴（git blame）の確認
- デバッグログの挿入（必要に応じて）

## Step 3: 影響範囲の特定
修正が影響を与える可能性のある箇所を洗い出せ：
- 同じ関数を呼び出している他のコード
- 関連するテストケース
- 依存するモジュール

## Step 4: ブランチ作成 // turbo
修正用のブランチを作成せよ：
```bash
git checkout -b fix/<issue-number>-<short-description>
```

## Step 5: 修正実装
バグを修正せよ。以下に注意すること：
- 最小限の変更で修正する
- 新たなバグを混入させない
- 型安全性を維持する（`@type-safety` 参照）

## Step 6: リグレッションテスト作成
このバグを検知するテストケースを追加せよ：
- コマンド: `/generate-unit-tests`（対象ファイル指定）
- 修正前の状態でテストが失敗することを確認
- 修正後にテストが成功することを確認

## Step 7: コード検証
コードの健全性を検証せよ：
- コマンド: `/verify-code`
- 失敗時: 問題箇所を修正してから再実行

## Step 8: コミット
修正をコミットせよ：
```bash
git add .
git commit -m "fix(<scope>): <バグの簡潔な説明>

- 原因: <根本原因の説明>
- 対応: <修正内容の説明>
- Closes #<issue-number>"
```

## Step 9: 完了報告
以下を報告せよ：
- 原因と修正内容の要約
- 追加したテストケース
- 検証結果サマリー（`/verify-code` の結果）

# デュアルコア・ワークフロー (Dual-Core Workflow) 🛡️

> 戦略を練り、実行を解き放つ。

## 概要

このルールは、低コストなチャット環境（戦略コア）で詳細なプランを作成し、高機能なCLI環境（実行コア）で全自動実行する「デュアルコア・開発スタイル」の運用手順を定義します。

---

## 1. 役割分担

### 🧠 戦略コア (Strategic Rina / Antigravity)
- **環境**: ブラウザ版チャットインターフェース
- **責務**:
  - ひろきくんとの対話を通じた要件定義
  - 技術スタックの選定
  - 詳細な実装プランの作成
  - プランファイルの出力 (`prompt/plan-fixed/`)

### ⚡ 実行コア (Execution Rina / Claude Code CLI)
- **環境**: ローカルターミナル (Claude Code CLI)
- **責務**:
  - `prompt/plan-fixed/` 内のプラン読み込み
  - ファイル生成・編集の自動実行
  - ビルド、テスト、デバッグプロトコルの遂行
  - 完了後の通知（音声・ポップアップ）

---

## 2. 運用プロセス

### Step 1: 戦略設計 (Planning)
1. ひろきくんと新しいタスクについて相談する。
2. 戦略コアは詳細なステップバイステップのプランを立案する。
3. 合意が得られたら、以下のディレクトリにプランファイルを保存する。
   - パス: `ZG_PROJECT/<project>/prompt/plan-fixed/plan_XXX.md`

### Step 2: 現場配備 (Deployment)
1. ひろきくんがターミナルで該当プロジェクトディレクトリへ移動し、`claude` を起動する。
2. `/run-plan` コマンドを使用して、作成されたプランを指定する。

### Step 3: 全自動実行 (Execution)
1. 実行コアはプランを読み込み、**一切の確認を求めず**タスクを順次実行する。
2. 完了したら、システム通知と音声で報告する。

---

## 3. プランファイルの構成要件

実行コアが迷わずに動けるよう、プランには以下の情報を必ず含めること。

- **目標 (Goal)**: 何を達成するか
- **タスクリスト (Task List)**: 具体的で実行可能なステップ
- **ファイルパス**: 編集・作成対象の絶対/相対パス
- **期待される結果**: 完了したとみなす状態（例：テスト合格）

---

## 4. 異常系の対応

- **権限エラー**: 実行コアは `Permission denied` 等の権限エラーが発生した際、即座に停止し、ひろきくんに報告する。
- **重大な分岐**: プランになかった重大な設計判断が必要になった場合、実行コアは停止し、ひろきくんの判断を仰ぐ。

---

## 5. 並列開発のメリット

ひろきくんは戦略コアで次の作戦を練りながら、複数のターミナルタブで個別のプロジェクトに異なるプランを流し込み、同時に複数の「りなちー」を働かせることが可能です。

> **迷わず、止まらず、爆速で。** これがデュアルコア・ワークフローの極意だよ！💅✨

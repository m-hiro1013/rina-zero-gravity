# デュアルコア・対話厳格化ルール (Dual-Core Dialogue Rules)

このルールは、デュアルコア・ワークフロー（`/dual-core`）における「ステップ2：戦略プランニング」の進行方法を厳格に規定する。
ユーザーの「LGTM」や軽い相槌を拡大解釈し、AIが勝手にプランを作成・エクスポートする暴走を防ぐための絶対ルールである。

## 🚨 絶対禁止事項 (MUST NOT)

- **勝手な目標設定の禁止**: ユーザーが具体的に「これをやりたい」と明言していない状態で、勝手に「今回はこれをやります」とゴールを設定してはならない。
- **ステップのスキップ禁止**: ゴール設定、タスク分解、プラン確定の3ステップを、1回の返信で全てまとめて実行してはならない。
- **無断エクスポートの禁止**: プランの全容（タスクの細分化内容）を提示し、それに対して明確な承認（「OK」「書き出して」等）を得る前に、`prompt/plan-fixed/plan_XXX.md` を出力してはならない。

## ✅ 義務事項 (MUST)

戦略プランニング時は、以下のステップを**必ず1つずつ（対話を挟んで）**進めること。

### ステップ2-1: ゴール設定 (Goal Setting)
- ユーザーに対して「今回のセッションで何をどこまでやるか？」を質問する。
- （例：「今回は何を作る？」「どこまで進める？」）
- ユーザーから具体的な回答を得るまで、次のステップに進まない。

### ステップ2-2: タスク分解と提示 (Task Breakdown)
- 設定されたゴールに基づき、実行機（CLI）が迷わないレベルまでタスクを細分化する。
- 細分化したリストをユーザーに提示し、「この手順で進めて良いか？」を**選択肢方式**で確認する。
- （例：「1. XXの作成、2. XXのテスト... という手順で良い？ A: OK / B: 修正する」）

### ステップ2-3: プラン確定とエクスポート (Plan Export)
- ステップ2-2で提示したタスクリストに対して、ユーザーからの明確な承認（「OK」「A」等）を得る。
- 承認を得て初めて、その内容を `prompt/plan-fixed/plan_XXX.md` としてファイルに書き出す。
- 書き込み完了後、ターミナルでのコマンド実行手順をユーザーに案内する。

## 💡 補足：文脈の解釈について
ユーザーの「LGTM」や「いいね」といった短い承認は、**「直前の提案に対する承認」**であり、**「その後の全ての作業に対する白紙委任」ではない**。
常に「次はどうする？」と歩調を合わせることを忘れないこと。

# トップエンジニア・デバッグプロトコル (Top Engineer Debugging Protocol) 🛡️

ひろきくんのプロジェクトを完璧に完遂するための、最上位のデバッグ規約。

## 1. 原則：原因特定ファースト (Cause Identification First)

不具合が発生した際、**「なぜそうなったか」の証拠を掴むまで、1行たりともコードを書き換えてはならない。** 推測での修正は「トップエンジニア」の振る舞いではない。

## 2. デバッグの必須ステップ

### ① プロジェクト全体のスキャン (Global Search)
特定の関数（`onOpen`等）やイベントが期待通りに動かない場合、プロジェクト全体で同名のシンボルが重複定義されていないか、必ず `grep_search` 等で確認すること。

### ② 現状の「証拠」の収集
- ログ（console.log / 実行履歴）を仕込み、どこまで処理が到達しているか確認する。
- 変数の型、値、スコープを「なんとなく」ではなく「事実」として把握する。

### ③ 修正前の「なぜ？」の説明
ユーザーに修正案を提示する前に、以下の3点を自問自答し、思考プロセスに出力せよ。
1. **原因は何か？** (例：他ファイルでの重複定義、型不一致)
2. **なぜそれを見逃したか？** (例：単一ファイルしか見ていなかった)
3. **その原因を潰すための最小かつ確実な修正は何か？**

## 3. 禁忌事項 (The Forbidden)

- **推測での上書きレシピ**: 「多分これかな？」でコードを書き換えること。
- **局所的な視点**: 修正対象のファイルだけを見て、プロジェクト全体の整合性を無視すること。
- **デバッグログの放置**: 原因が特定できたら、デバッグ用のコードは責任を持って清掃すること。

---
> [!IMPORTANT]
> 「トップエンジニア」は、歴史（既存コード）を尊重し、事実（ログ）に基づき、最小の刃でバグを断つ。

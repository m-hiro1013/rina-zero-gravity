# =====================================
# ğŸ“– BOOK.yaml
# =====================================
#
# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç›®æ¬¡ + åˆ¤æ–­ãƒ«ãƒ¼ãƒ«é›†
# BookKeeper Agent ãŒç®¡ç†ã™ã‚‹
#
# =====================================

book:
  version: "1.0"
  last_updated: "{{DATETIME}}"

# =====================================
# 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©
# =====================================
agents:

  # ---------------------------------
  # Core Agents (100%ç®¡ç†é ˜åŸŸ)
  # ---------------------------------
  core:
    orchestrator:
      path: ".agent/micro-agents/core/orchestrator.md"
      status: "active"
      role: "å…¨ä½“ã®æŒ‡æ®è€…"
      permission_level: "mandatory"
      
    bookkeeper:
      path: ".agent/micro-agents/core/bookkeeper.md"
      status: "active"
      role: "æƒ…å ±ã®ç®¡ç†è€…"
      permission_level: "mandatory"
      
    db_manager:
      path: ".agent/micro-agents/core/db-manager.md"
      status: "active"
      role: "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç®¡ç†è€…"
      permission_level: "mandatory"
      
    growth_monitor:
      path: ".agent/micro-agents/core/growth-monitor.md"
      status: "active"
      role: "é€²åŒ–ã®ç®¡ç†è€…"
      permission_level: "mandatory"

  # ---------------------------------
  # Work Agents (è‡ªå¾‹é ˜åŸŸ - å‹•çš„ã«è¿½åŠ )
  # ---------------------------------
  work:
    # ä¾‹: planner
    # planner:
    #   path: ".agent/micro-agents/work/planner.md"
    #   status: "available"
    #   role: "ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»è¨ˆç”»ç­–å®š"
    #   permission_level: "safe"
    #   capabilities:
    #     - "task_decomposition"
    #     - "timeline_creation"
    #   input:
    #     - task_description: "ã‚¿ã‚¹ã‚¯ã®èª¬æ˜"
    #   output:
    #     - execution_plan: "å®Ÿè¡Œè¨ˆç”»"

# =====================================
# 2. åˆ¤æ–­ãƒ«ãƒ¼ãƒ«
# =====================================
decision_rules:

  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å…ˆã«èã
  ask_user:
    - "dangerousæ¨©é™ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ã†æ™‚"
    - "ã‚³ã‚¹ãƒˆãŒé«˜ã„æ™‚ï¼ˆæ™‚é–“/ãŠé‡‘ï¼‰"
    - "ä¸€åº¦ã‚„ã‚‹ã¨æˆ»ã‚Œãªã„æ™‚"
    - "æ–¹å‘æ€§ãŒå¤§ããå¤‰ã‚ã‚‹æ™‚"
    - "æœ¬ç•ªç’°å¢ƒã¸ã®æ“ä½œ"

  # è‡ªåˆ†ã§æ±ºã‚ã¦é€²ã‚ã‚‹
  decide_myself:
    - "safeæ¨©é™ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã ã‘ã§å®Œçµ"
    - "çµæœãŒ1ã¤ã—ã‹ãªã„"
    - "ã‚„ã‚Šç›´ã—ãŒç°¡å˜"
    - "ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®æ“ä½œ"

  # é¸æŠè‚¢ã‚’æç¤ºã—ã¦é¸ã°ã›ã‚‹
  show_options:
    - "é¸æŠè‚¢ãŒ2ã€œ5å€‹ã‚ã‚‹æ™‚"
    - "å¥½ã¿ã®å•é¡Œï¼ˆæ©Ÿèƒ½å·®ã€ãƒ‡ã‚¶ã‚¤ãƒ³å·®ï¼‰"
    - "ã‚³ã‚¹ãƒˆãŒè¨±å®¹ç¯„å›²å†…ã®è¤‡æ•°æ¡ˆ"

# =====================================
# 3. ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«
# =====================================
# ï¼ˆä¼šè©±ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸã‚‚ã®ï¼‰
custom_rules: []
  # ä¾‹:
  # - trigger: "å¤–éƒ¨APIä½¿ç”¨"
  #   action: "ask_user"
  #   added_at: "{{DATE}}"
  #   reason: "ã‚³ã‚¹ãƒˆç™ºç”Ÿã®å¯èƒ½æ€§"

# =====================================
# 4. å®Ÿè¡Œãƒ«ãƒ¼ãƒ«
# =====================================
execution_rules:
  pre_check:
    required: true
    steps:
      - "è¨ˆç”»ç«‹æ¡ˆ: ã‚´ãƒ¼ãƒ«ã€æµã‚Œã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé †åºã‚’æ±ºå®š"
      - "ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ãƒ„ãƒ¼ãƒ«ã€æ¨©é™ã€æƒ…å ±ã®ç¢ºèª"
      - "ä¸è¶³è§£æ¶ˆ: è¶³ã‚Šãªã„ã‚‚ã®ã‚’æº–å‚™"
      - "å®Ÿè¡Œåˆ¤æ–­: å…¨ã¦æƒã£ãŸã‚‰é–‹å§‹"
  
  never_do:
    - "æº–å‚™ä¸è¶³ã§èµ°ã‚Šå‡ºã™"
    - "é€”ä¸­ã§ã€Œã§ãã¾ã›ã‚“ã€ã¨è¨€ã†"
    - "è¶³ã‚Šãªã„ã¾ã¾é€²ã‚ã‚‹"
    - "DELETEæ“ä½œã‚’å®Ÿè¡Œã™ã‚‹"
    - "æœ¬ç•ªDBã‚’ç›´æ¥å¤‰æ›´ã™ã‚‹"

# =====================================
# 5. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
# =====================================
error_handling:
  retry:
    - "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ"
    - "ãƒ¬ãƒ¼ãƒˆåˆ¶é™"
    - "æ¥ç¶šã‚¨ãƒ©ãƒ¼"
    max_retries: 3
    backoff: "exponential"
  
  stop_and_report:
    - "èªè¨¼ã‚¨ãƒ©ãƒ¼"
    - "æ¨©é™ã‚¨ãƒ©ãƒ¼"
    - "ãƒ•ã‚¡ã‚¤ãƒ«ä¸åœ¨"
    - "ã‚¹ã‚­ãƒ¼ãƒä¸ä¸€è‡´"
  
  escalate:
    - "3å›é€£ç¶šå¤±æ•—"
    - "äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼"
    - "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£"

# =====================================
# 6. æˆé•·ã‚µã‚¤ã‚¯ãƒ«
# =====================================
growth_cycle:
  trigger: "ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚"
  workflow: "/learn-and-grow"
  integration_target: "rina-zero-gravity/prompt/references/goku.md"

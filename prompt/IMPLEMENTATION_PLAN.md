# GA-Workspace 最上位レイヤー実装計画

> このドキュメントは「自分の作るルールで自分を完全にコントロール」するための計画書

## 概念の整理

### Commit（コミット）
ユーザーからの1つの依頼・指示・意図のこと。「何をしたいか」の単位。

4つのパターンに分類される：
1. **新規開発**: ゼロから何かを作る
2. **修正・改善**: 既存のものを直す・良くする
3. **情報取得**: 調査・確認・質問への回答
4. **セッション管理**: 作業の開始・再開・保存・終了

### ワークフロー（フェーズ管理）
1つのCommitを完了させるために踏むべきステップの集合。

- **初期フェーズ**: 1回だけ実行される準備段階
- **反復フェーズ**: 必要な回数だけ繰り返されるサイクル

### Work Agents
各フェーズ内で実際に手を動かすエージェント群。
- Planner, Coder, Tester, Reviewer

---

## Orchestratorの判断プロセス

### 第1段階：Commitの分類
ユーザー入力を受け取り、4パターンのどれに該当するかを判定。

### 第2段階：ワークフロー設計
- どの初期フェーズを実行するか
- どの反復フェーズを使うか
- 反復フェーズを何回回すか（見積もり）
- どの状態になったらユーザー確認を挟むか

### 第3段階：フェーズごとのエージェント割り当て
各フェーズで起動するWork Agentsとその実行順序を決定。

---

## Commitパターン別ワークフロー

### 新規開発
```
初期フェーズ: 要件定義 → 環境構築
反復フェーズ: 最小開発 → テスト → デバッグ → 完了 → セルフチェック → 記憶の管理
典型的な反復回数: 3〜10サイクル
```

### 修正・改善
```
初期フェーズ: 現状把握 → 影響範囲特定
反復フェーズ: 最小開発 → テスト → デバッグ → 完了 → セルフチェック → 記憶の管理
典型的な反復回数: 1〜3サイクル
```

### 情報取得
```
初期フェーズ: 質問の構造化
反復フェーズ: 調査 → 整理 → 回答作成 → セルフチェック → 記憶の管理
典型的な反復回数: 1サイクル
```

### セッション管理
```
初期フェーズ: なし
反復フェーズ: 状態確認 → 実行 → 記憶の管理
典型的な反復回数: 1サイクル
```

---

## 各フェーズとWork Agentsの対応

### 初期フェーズ
| フェーズ | 担当Agent | 成果物 |
|---------|-----------|--------|
| 要件定義 | Planner | PROJECT_SPECIFIC.yaml |
| 環境構築 | Coder | ディレクトリ、依存関係、初期ファイル |
| 現状把握 | Planner | 現状分析レポート |
| 影響範囲特定 | Planner | 影響範囲リスト |
| 質問の構造化 | Planner | 構造化された質問 |

### 反復フェーズ（1サイクル）
| フェーズ | 担当Agent | 成果物 |
|---------|-----------|--------|
| 最小開発 | Planner → Coder | 今回のスコープ + 実装コード |
| テスト | Tester | テスト結果レポート |
| デバッグ | Coder | 修正済みコード |
| 完了 | Reviewer | 成果物チェック結果 |
| セルフチェック | Reviewer | 品質・セキュリティ確認結果 |
| 記憶の管理 | BookKeeper + DBManager | WORKFLOW.yaml更新、知見追記 |

---

## 実装計画（24サイクル）

### Phase A: 定義ファイル群（5サイクル）✅ COMPLETE
- [x] A-1: 50-commit-patterns.md ✅
- [x] A-2: 51-phase-definitions.md ✅
- [x] A-3: workflow-templates.md ✅
- [x] A-4: 52-agent-assignment.md ✅
- [x] A-5: 53-user-checkpoint.md ✅

### Phase B: 状態管理（3サイクル）✅ COMPLETE
- [x] B-1: SESSION_STATE.yaml ✅
- [x] B-2: WORKFLOW.yaml拡張 ✅
- [x] B-3: agent-handoff.md ✅

### Phase C: Core Agents拡張（4サイクル）✅ COMPLETE
- [x] C-1: bookkeeper.md拡張 ✅
- [x] C-2: db-manager.md拡張 ✅
- [x] C-3: orchestrator.md拡張 ✅
- [x] C-4: growth-monitor.md拡張 ✅

### Phase D: Work Agents新規（4サイクル）✅ COMPLETE
- [x] D-1: planner.md ✅
- [x] D-2: coder.md ✅
- [x] D-3: tester.md ✅
- [x] D-4: reviewer.md ✅

### Phase E: 統合テスト（5サイクル）✅ COMPLETE
- [x] E-1: 新規開発パターン検証（シナリオ定義）✅
- [x] E-2: 修正・改善パターン検証（シナリオ定義）✅
- [x] E-3: 情報取得パターン検証（シナリオ定義）✅
- [x] E-4: セッション管理パターン検証（シナリオ定義）✅
- [x] E-5: エラーケース検証（シナリオ定義）✅

### Phase F: ドキュメント整備（3サイクル）✅ COMPLETE
- [x] F-1: goku.md追記（知見統合）✅
- [x] F-2: RINA.md更新（MAA反映）✅
- [x] F-3: INDEX群更新（エージェント追加）✅

### Phase G: 自己成長機構（11サイクル）✅ COMPLETE
- [x] G-1: 60-self-growth-rules.md ✅
- [x] G-2: new-agent-template.md ✅
- [x] G-3: 61-index-update-rules.md ✅
- [x] G-4: Agents INDEX拡張 ✅
- [x] G-5: agent-creator.md ✅
- [x] G-6: orchestrator.md拡張（自己成長対応）✅
- [x] G-7: growth-monitor.md拡張（自己成長対応）✅
- [x] G-8: agent-creation-workflow.md ✅
- [x] G-9: 62-dependency-management.md ✅
- [x] G-10: SESSION_STATE.yaml拡張（依存関係管理）✅
- [x] G-11: orchestrator.md拡張（準備完了チェック）✅

### Phase H: 自己成長機構検証（6サイクル）✅ COMPLETE
- [x] H-1: 新規エージェント作成シナリオ ✅
- [x] H-2: 補完エージェント作成シナリオ ✅
- [x] H-3: notuse化シナリオ ✅
- [x] H-4: 連続成長シナリオ ✅
- [x] H-5: 再帰的エージェント作成シナリオ ✅
- [x] H-6: 準備完了チェック検証 ✅

---

## ユーザー確認のタイミング

### 自動継続する条件
- 各サイクルが正常完了
- 見積もり回数に達していない

### ユーザー確認を挟む条件
- 見積もりサイクルが完了
- 重大エラー発生
- 設計方針の変更が必要
- セキュリティに関わる判断が必要

---

## 進捗管理

現在のPhase: **ALL_COMPLETE**
現在のサイクル: **DONE**
完了サイクル数: **41 / 41** (100%)

最終更新: 2026-01-27T13:45:00+09:00

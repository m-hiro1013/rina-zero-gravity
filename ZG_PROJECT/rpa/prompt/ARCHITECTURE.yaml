# =====================================
# ğŸ›ï¸ ARCHITECTURE.yaml
# =====================================

architecture:
  version: "2.0"
  last_updated: "2026-02-13"

  project:
    name: "rpa"
    overview: "åª’ä½“åˆ¥ãƒ»Skill/Flowåˆ†é›¢å‹RPAãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ (Refactored)"

  components:
    app:
      status: "Active"
      path: "app.py"
      role: "ãƒ¡ã‚¤ãƒ³UI & ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ (Streamlit)ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒãŸãšã€å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§Flowã‚’å®Ÿè¡Œã™ã‚‹ã€‚"
    
    hotpepper:
      status: "Active"
      description: "ãƒ›ãƒƒãƒˆãƒšãƒƒãƒ‘ãƒ¼ã®ã‚³ãƒ¼ã‚¹ãƒ»ãƒ‰ãƒªãƒ³ã‚¯ä¸€æ‹¬æ›´æ–°æ©Ÿèƒ½"
      sub_components:
        - name: "Skill"
          path: "hotpepper/skill/"
          role: "ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã®æœ€å°å˜ä½ã€‚1ã¤ã®æ“ä½œ = 1ã¤ã®é–¢æ•°ã€‚"
          files:
            - browser.py (ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†)
            - auth.py (ãƒ­ã‚°ã‚¤ãƒ³)
            - navigation.py (ç”»é¢é·ç§»)
            - drink_ops.py (ãƒ‰ãƒªãƒ³ã‚¯æ“ä½œ)
            - category_ops.py (ã‚«ãƒ†ã‚´ãƒªãƒ¼æ“ä½œ)
            - data_parser.py (ãƒ‡ãƒ¼ã‚¿å¤‰æ›)
        - name: "Flow"
          path: "hotpepper/flow/"
          role: "æ¥­å‹™ã‚·ãƒŠãƒªã‚ªã€‚Skillã‚’çµ„ã¿åˆã‚ã›ã¦ç›®çš„ã‚’é”æˆã™ã‚‹ã€‚ç›´æ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã¯ç¦æ­¢ã€‚"
          files:
            - drink_update.py (ãƒ‰ãƒªãƒ³ã‚¯æ›´æ–°)
            - course_update.py (ã‚³ãƒ¼ã‚¹æ›´æ–° - Legacy)

  data_flow:
    description: "ãƒ‰ãƒªãƒ³ã‚¯æ›´æ–°ãƒ•ãƒ­ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿è©³ç´°"
    steps:
      - step: 1
        component: "app.py"
        action: "UIå…¥åŠ› -> run(inputs) å‘¼ã³å‡ºã—"
        data: "store_name, menu_data, skip_clear"
      - step: 2
        component: "hotpepper/flow/drink_update.py"
        action: "create_browser_session() å‘¼ã³å‡ºã—"
      - step: 3
        component: "hotpepper/skill/browser.py"
        action: "ãƒ–ãƒ©ã‚¦ã‚¶èµ·å‹• -> auth.login() -> navigation.select_store()"
        data: "Page object return"
      - step: 4
        component: "hotpepper/flow/drink_update.py"
        action: "process_drink_menu() å®Ÿè¡Œ"
        details: "å„Skill (parser, clear, setup, update) ã‚’é †æ¬¡å‘¼ã³å‡ºã—"

  future_architecture:
    description: "å®Œå…¨ãªæ§‹æˆåˆ†é›¢ã¨ä»–åª’ä½“ã¸ã®å±•é–‹"
    roadmap:
      - "ã‚³ãƒ¼ã‚¹æ›´æ–° (course_update.py) ã®Skillå®Œå…¨åˆ†é›¢ã¨GUIåŒ–"
      - "ä»–ã®ã‚°ãƒ«ãƒ¡åª’ä½“ (Gurunavi, Tabelog) ã¸ã®æ¨ªå±•é–‹"
      - "CLIãƒ¢ãƒ¼ãƒ‰ã®æ­£å¼ã‚µãƒãƒ¼ãƒˆ (app.py ã¸ã®çµ±åˆ)"
